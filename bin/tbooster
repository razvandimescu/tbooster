#!/usr/bin/env ruby
require 'tbooster'

if !Tbooster.runned_from_rails_root?
  puts "must be in rails root"
  exit
end

if ARGV && ARGV[0] == "reload"
  Tbooster.kill_opened_processes
end

if !Tbooster.listeners_loaded?
  Tbooster.kill_zombies_and_cleanup
  Tbooster.send(ARGV)
  Tbooster.start_listeners
else
  Tbooster.send(ARGV)
end

